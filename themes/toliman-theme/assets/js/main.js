'use strict';var base='/toliman/',siteDomain='/toliman/',popState=!1,$=jQuery,animationEnd='animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd',transitionEnd='transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd',mobile=function(){return!!(577>window.innerWidth)};Array.from(document.querySelectorAll(':not(.admin-bar) a')).forEach(function(b){b.classList.add(location.hostname!==b.hostname&&b.hostname.length?'external':'open-modal')});var modal={open:!1,create:function d(a,b){modal.open=!0;var c='<div class="tol-modal-overlay fade-in '+a+'"><div class="load-icon"><i class="fas fa-circle-notch fa-spin"></i></div>';switch(c+='<div class="tol-modal-box"><div id="exit"><i class="fas fa-times"></i></div><div class="tol-modal-content">',c+='</div></div>',c+='</div>',jQuery('#overlay').prepend(c).addClass('active'),a){case'page':default:modal.load(b),jQuery('html').css({"overflow-y":'hidden'}),jQuery('#overlay').css('overflow-y','scroll');}setTimeout(function(){jQuery('.tol-modal-overlay').removeClass('fade-in')},250)},changePage:function b(a){jQuery('.load-icon').removeClass('fade-out'),jQuery('.load-icon').bind(animationEnd,function(){jQuery('.load-icon').remove()}),jQuery('.tol-modal-content').addClass('fade-out-slow'),setTimeout(function(){modal.load(a)},500)},load:function b(a){return a==window.location||null==a||popState||history.pushState({path:a},'',a),siteDomain=null==a?'/toliman/ajax':a,jQuery.ajaxSetup({cache:!1}),jQuery('.tol-modal-box').addClass('fade-in'),jQuery('.tol-modal-content').load(siteDomain,{id:3},function(a,b,c){jQuery('.load-icon').addClass('animated fade-out'),jQuery('.load-icon').bind(animationEnd,function(){jQuery('.load-icon').remove()}),jQuery('#overlay').scrollTop(1),setTimeout(function(){jQuery('.tol-modal-content').addClass('fade-in-slow').removeClass('fade-out-slow'),jQuery('body').addClass('noscroll');var a=jQuery('.page h1').first().text();'page'==modal.type&&(document.title=a+' | Toliman')},250),'Not Found'==c.statusText&&jQuery('.tol-modal-content').html('<h1>Page Not Found</h1><p>Sorry!</p>')}),!1},destroy:function b(){var a=jQuery('.contact-content');modal.open&&(!popState&&history.pushState({path:base},'',base),jQuery('.tol-modal-overlay').addClass('fade-out'),modal.open=!1,jQuery('html').css({"overflow-y":'auto'}),jQuery('#overlay').css('overflow-y','hidden'),jQuery('body').removeClass('noscroll'),setTimeout(function(){0!=a.length&&jQuery('.contact-form-container').prepend(a),jQuery('.tol-modal-overlay').remove(),jQuery('#overlay').removeClass('active'),document.title='Toliman'},250))}};// ---------------- Check if element is in view
$.fn.isInViewport=function(a){null==a&&(a=0);var b=$(this).offset().top+a,c=b+$(this).outerHeight(),d=$(window).scrollTop(),e=d+$(window).height();return c>d&&b<e},jQuery(document).ready(function(a){a(document).on('click','.mobile-nav-button',function(){a('.mobile-nav-button, .mobile-nav').addClass('open')}),a(document).on('click','.close-button',function(){a('.mobile-nav-button, .mobile-nav').removeClass('open')});// ------------------ Adjust slider height based on slide content
var b=function(b,c){var d=[],e=0;c.each(function(){d.push(a(this).outerHeight(!0))}),d.forEach(function(a){a>e&&(e=a)}),b.css('height',e+'px')};b(a('ul.descriptions'),a('ul.descriptions li')),a(window).resize(function(){b(a('ul.descriptions'),a('ul.descriptions li'))}),a(document).on('click','ul.categories li',function(){a('ul.categories li, ul.descriptions li').removeClass('active');var b=a(this).attr('class');a(this).addClass('active'),a('ul.descriptions li.'+b).addClass('active')});// ------------------ Scroll Events
var c=!1,d=!1,e=a('.phone h2'),f=a('.phone');a(window).scroll(function(){console.log('scrolling');a(window).scrollTop();if(a('.proven-success').isInViewport(250)&&!c){c=!0;var b=0;e.each(function(){var c=a(this);setTimeout(function(){c.parent('#community').length?c.addClass('fadeInRight'):c.addClass('fadeInLeft')},b),b+=250}),b=0,f.each(function(){var c=a(this);setTimeout(function(){c.addClass('animated fadeInUp')},b),b+=75})}a('.reminder').length&&a('.reminder').isInViewport(250)&&!d&&(a('.reminder').addClass('animated fadeInRight'),d=!0,setTimeout(function(){a('.reminder').removeClass('offscreen fadeInRight')},1e3))}),a(document).on('click','.open-modal',function(b){b.preventDefault();var c;if(a(this).attr('href')!=null){c=a(this).attr('href');var d=!0;c.includes('#')&&(d=!1)}if(d)modal.open?modal.changePage(c):setTimeout(function(){modal.create('page',c)},1);else{// Scroll page
var e=c.split('#');e='#'+e[1],a('html, body').animate({scrollTop:a(e).offset().top-100},750)}a('.mobile-nav').removeClass('open')}),window.onpopstate=function(){popState=!0,popStateurl=window.location.pathname,modal.open&&popStateurl!=base?modal.load(popStateurl):popStateurl==base?modal.destroy():modal.create('page',popStateurl),popState=!1};// ------------------ Prevent modal overscroll
var g=a('#overlay');// ------------------ Close modal window by clicking outside of element
a('#overlay').scroll(function(){1>a('#overlay').scrollTop()?a('#overlay').scrollTop(1):1>=g[0].scrollHeight-a('#overlay').scrollTop()-a('#overlay').outerHeight()&&a('#overlay').scrollTop(a('#overlay').scrollTop()-1)}),a(document).click(function(b){!a(b.target).closest('.tol-modal-box, .load-icon').length&&modal.open&&a('.tol-modal-box').is(':visible')&&modal.destroy()}),a(document).on('click','#exit, .exit-modal',function(a){a.preventDefault(),modal.destroy()})});